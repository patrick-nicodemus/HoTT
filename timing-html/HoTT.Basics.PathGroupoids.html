<html>
<head>
<title>PathGroupoids.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for PathGroupoids.v</h1>

<div class="code" title="File: PathGroupoids.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * The groupoid structure of paths *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 2
Time: 0.021s">
<div class="time" style="width: 63.636363636364%"></div>
<pre>Require Import Basics.Overture Basics.Tactics.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Naming conventions

   We need good naming conventions that allow us to name theorems without looking them up. The names should indicate the structure of the theorem, but they may sometimes be ambiguous, in which case you just have to know what is going on.    We shall adopt the following principles:

   - we are not afraid of long names
   - we are not afraid of short names when they are used frequently
   - we use underscores
   - name of theorems and lemmas are lower-case
   - records and other types may be upper or lower case

   Theorems about concatenation of paths are called [concat_XXX] where [XXX] tells us what is on the left-hand side of the equation. You have to guess the right-hand side. We use the following symbols in [XXX]:

   - [1] means the identity path, or sometimes the identity function
   - [p] means 'the path'
   - [V] means 'the inverse path'
   - [A] means '[ap]'
   - [M] means the thing we are moving across equality
   - [x] means 'the point' which is not a path, e.g. in [transport p x]
   - [2] means relating to 2-dimensional paths
   - [3] means relating to 3-dimensional paths, and so on

   Associativity is indicated with an underscore. Here are some examples of how the name gives hints about the left-hand side of the equation.

   - [concat_1p] means [1 @ p]
   - [concat_Vp] means [p^ @ p]
   - [concat_p_pp] means [p @ (q @ r)]
   - [concat_pp_p] means [(p @ q) @ r]
   - [concat_V_pp] means [p^ @ (p @ q)]
   - [concat_pV_p] means [(q @ p^) @ p] or [(p @ p^) @ q], but probably the former because for the latter you could just use [concat_pV].

   Laws about inverse of something are of the form [inv_XXX], and those about [ap] are of the form [ap_XXX], and so on. For example:

   - [inv_pp] is about [(p @ q)^]
   - [inv_V] is about [(p^)^]
   - [inv_A] is about [(ap f p)^]
   - [ap_V] is about [ap f (p^)]
   - [ap_pp] is about [ap f (p @ q)]
   - [ap_idmap] is about [ap idmap p]
   - [ap_1] is about [ap f 1]
   - [ap02_p2p] is about [ap02 f (p @@ q)]

   Then we have laws which move things around in an equation. The naming scheme here is [moveD_XXX]. The direction [D] indicates where to move to: [L] means that we move something to the left-hand side, whereas [R] means we are moving something to the right-hand side. The part [XXX] describes the shape of the side _from_ which we are moving where the thing that is getting moves is called [M].  The presence of 1 next to an [M] generally indicates an *implied* identity path which is inserted automatically after the movement.  Examples:

   - [moveL_pM] means that we transform [p = q @ r] to [p @ r^ = q]
     because we are moving something to the left-hand side, and we are
     moving the right argument of [concat].

   - [moveR_Mp] means that we transform [p @ q = r] to [q = p^ @ r]
     because we move to the right-hand side, and we are moving the left
     argument of [concat].

   - [moveR_1M] means that we transform [p = q] (rather than [p = 1 @ q]) to [p @ q^ = 1].

   There are also cancellation laws called [cancelR] and [cancelL], which are inverse to the 2-dimensional 'whiskering' operations [whiskerR] and [whiskerL].
*)

(** ** The 1-dimensional groupoid structure. *)

(** [concat], with arguments flipped. Useful mainly in the idiom [apply (concatR (expression))]. Given as a notation not a definition so that the resultant terms are literally instances of [concat], with no unfolding required. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Notation concatR := (fun p q =&gt; concat q p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The identity path is a right unit. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 66
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_p1 {A : Type} {x y : A} (p : x = y) :
  p @ 1 = p
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 69
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The identity is a left unit. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 71
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_1p {A : Type} {x y : A} (p : x = y) :
  1 @ p = p
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It's common to need to use both. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 76
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition concat_p1_1p {A : Type} {x y : A} (p : x = y)
  : p @ 1 = 1 @ p
  := concat_p1 p @ (concat_1p p)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition concat_1p_p1 {A : Type} {x y : A} (p : x = y)
  : 1 @ p = p @ 1
  := concat_1p p @ (concat_p1 p)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Concatenation is associative. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 84
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>Definition concat_p_pp {A : Type} {x y z t : A} (p : x = y) (q : y = z) (r : z = t) :
  p @ (q @ r) = (p @ q) @ r :=
  match r with idpath =&gt;
    match q with idpath =&gt;
      match p with idpath =&gt; 1
      end end end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 89
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>

Definition concat_pp_p {A : Type} {x y z t : A} (p : x = y) (q : y = z) (r : z = t) :
  (p @ q) @ r = p @ (q @ r) :=
  match r with idpath =&gt;
    match q with idpath =&gt;
      match p with idpath =&gt; 1
      end end end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The left inverse law. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 98
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_pV {A : Type} {x y : A} (p : x = y) :
  p @ p^ = 1
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The right inverse law. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 103
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_Vp {A : Type} {x y : A} (p : x = y) :
  p^ @ p = 1
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Several auxiliary theorems about canceling inverses across associativity.  These are somewhat redundant, following from earlier theorems.  *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 109
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>Definition concat_V_pp {A : Type} {x y z : A} (p : x = y) (q : y = z) :
  p^ @ (p @ q) = q
  :=
  match q with idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 114
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition concat_p_Vp {A : Type} {x y z : A} (p : x = y) (q : x = z) :
  p @ (p^ @ q) = q
  :=
  match q with idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 121
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition concat_pp_V {A : Type} {x y z : A} (p : x = y) (q : y = z) :
  (p @ q) @ q^ = p
  :=
  match q with idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 128
Time: 0.003s">
<div class="time" style="width: 9.0909090909091%"></div>
<pre>

Definition concat_pV_p {A : Type} {x y z : A} (p : x = z) (q : y = z) :
  (p @ q^) @ q = p
  :=
  (match q as i return forall p, (p @ i^) @ i = p with
    idpath =&gt;
    fun p =&gt;
      match p with idpath =&gt; 1 end
  end) p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Inverse distributes over concatenation *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 139
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>Definition inv_pp {A : Type} {x y z : A} (p : x = y) (q : y = z) :
  (p @ q)^ = q^ @ p^
  :=
  match q with idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 144
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition inv_Vp {A : Type} {x y z : A} (p : y = x) (q : y = z) :
  (p^ @ q)^ = q^ @ p
  :=
  match q with idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition inv_pV {A : Type} {x y z : A} (p : x = y) (q : z = y) :
  (p @ q^)^ = q @ p^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition inv_VV {A : Type} {x y z : A} (p : y = x) (q : z = y) :
  (p^ @ q^)^ = q @ p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Inverse is an involution. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 165
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition inv_V {A : Type} {x y : A} (p : x = y) :
  p^^ = p
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Theorems for moving things around in equations. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 171
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition moveR_Mp {A : Type} {x y z : A} (p : x = z) (q : y = z) (r : y = x) :
  p = r^ @ q -&gt; r @ p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 173
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 175
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (concat_1p _ @ h @ concat_1p _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 175
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_pM {A : Type} {x y z : A} (p : x = z) (q : y = z) (r : y = x) :
  r = q @ p^ -&gt; r @ p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (concat_p1 _ @ h @ concat_p1 _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_Vp {A : Type} {x y z : A} (p : x = z) (q : y = z) (r : x = y) :
  p = r @ q -&gt; r^ @ p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (concat_1p _ @ h @ concat_1p _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_pV {A : Type} {x y z : A} (p : z = x) (q : y = z) (r : y = x) :
  r = q @ p -&gt; r @ p^ = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (concat_p1 _ @ h @ concat_p1 _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_Mp {A : Type} {x y z : A} (p : x = z) (q : y = z) (r : y = x) :
  r^ @ q = p -&gt; q = r @ p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_1p _)^ @ h @ (concat_1p _)^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_pM {A : Type} {x y z : A} (p : x = z) (q : y = z) (r : y = x) :
  q @ p^ = r -&gt; q = r @ p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_p1 _)^ @ h @ (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_Vp {A : Type} {x y z : A} (p : x = z) (q : y = z) (r : x = y) :
  r @ q = p -&gt; q = r^ @ p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_1p _)^ @ h @ (concat_1p _)^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_pV {A : Type} {x y z : A} (p : z = x) (q : y = z) (r : y = x) :
  q @ p = r -&gt; q = r @ p^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_p1 _)^ @ h @ (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_1M {A : Type} {x y : A} (p q : x = y) :
  p @ q^ = 1 -&gt; p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_p1 _)^ @ h).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_M1 {A : Type} {x y : A} (p q : x = y) :
  q^ @ p = 1 -&gt; p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_1p _)^ @ h).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_1V {A : Type} {x y : A} (p : x = y) (q : y = x) :
  p @ q = 1 -&gt; p = q^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_p1 _)^ @ h).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_V1 {A : Type} {x y : A} (p : x = y) (q : y = x) :
  q @ p = 1 -&gt; p = q^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((concat_1p _)^ @ h).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_M1 {A : Type} {x y : A} (p q : x = y) :
  1 = p^ @ q -&gt; p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (h @ (concat_1p _)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_1M {A : Type} {x y : A} (p q : x = y) :
  1 = q @ p^ -&gt; p = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (h @ (concat_p1 _)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_1V {A : Type} {x y : A} (p : x = y) (q : y = x) :
  1 = q @ p -&gt; p^ = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (h @ (concat_p1 _)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_V1 {A : Type} {x y : A} (p : x = y) (q : y = x) :
  1 = p @ q -&gt; p^ = q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 278
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (h @ (concat_1p _)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 281
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* In general, the path we want to move might be arbitrarily deeply nested at the beginning of a long concatenation.  Thus, instead of defining functions such as [moveL_Mp_p], we define a tactical that can repeatedly rewrite with associativity to expose it. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 283
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Ltac with_rassoc tac :=
  repeat rewrite concat_pp_p;
  tac;
  (* After moving, we reassociate to the left (the canonical direction for paths). *)
  repeat rewrite concat_p_pp.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Ltac rewrite_moveL_Mp_p := with_rassoc ltac:(apply moveL_Mp).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Ltac rewrite_moveL_Vp_p := with_rassoc ltac:(apply moveL_Vp).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Ltac rewrite_moveR_Mp_p := with_rassoc ltac:(apply moveR_Mp).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 291
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Ltac rewrite_moveR_Vp_p := with_rassoc ltac:(apply moveR_Vp).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_transport_p {A : Type} (P : A -&gt; Type) {x y : A}
  (p : x = y) (u : P x) (v : P y)
  : u = p^ # v -&gt; p # u = v.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 298
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact idmap.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 300
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_transport_V {A : Type} (P : A -&gt; Type) {x y : A}
  (p : y = x) (u : P x) (v : P y)
  : u = p # v -&gt; p^ # u = v.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 304
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 305
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact idmap.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 308
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_transport_V {A : Type} (P : A -&gt; Type) {x y : A}
  (p : x = y) (u : P x) (v : P y)
  : p # u = v -&gt; u = p^ # v.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 312
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 313
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 314
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact idmap.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 315
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 316
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_transport_p {A : Type} (P : A -&gt; Type) {x y : A}
  (p : y = x) (u : P x) (v : P y)
  : p^ # u = v -&gt; u = p # v.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 320
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 321
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact idmap.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 323
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* We have some coherences between those proofs. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition moveR_transport_p_V {A : Type} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P x) (v : P y) (q : u = p^ # v)
  : (moveR_transport_p P p u v q)^ = moveL_transport_p P p v u q^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 328
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 329
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 330
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveR_transport_V_V {A : Type} (P : A -&gt; Type) {x y : A}
           (p : y = x) (u : P x) (v : P y) (q : u = p # v)
  : (moveR_transport_V P p u v q)^ = moveL_transport_V P p v u q^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 337
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 338
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_transport_V_V {A : Type} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P x) (v : P y) (q : p # u = v)
  : (moveL_transport_V P p u v q)^ = moveR_transport_V P p v u q^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 342
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 343
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 344
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 345
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_transport_p_V {A : Type} (P : A -&gt; Type) {x y : A}
           (p : y = x) (u : P x) (v : P y) (q : p^ # u = v)
  : (moveL_transport_p P p u v q)^ = moveR_transport_p P p v u q^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 349
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 350
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 351
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 352
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Functoriality of functions *)

(** Here we prove that functions behave like functors between groupoids, and that [ap] itself is functorial. *)

(** Functions take identity paths to identity paths. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 358
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap_1 {A B : Type} (x : A) (f : A -&gt; B) :
  ap f 1 = 1 :&gt; (f x = f x)
  :=
  1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition apD_1 {A B} (x : A) (f : forall x : A, B x) :
  apD f 1 = 1 :&gt; (f x = f x)
  :=
  1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 366
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Functions commute with concatenation. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 368
Time: 0.003s">
<div class="time" style="width: 9.0909090909091%"></div>
<pre>Definition ap_pp {A B : Type} (f : A -&gt; B) {x y z : A} (p : x = y) (q : y = z) :
  ap f (p @ q) = (ap f p) @ (ap f q)
  :=
  match q with
    idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 374
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap_p_pp {A B : Type} (f : A -&gt; B) {w : B} {x y z : A}
  (r : w = f x) (p : x = y) (q : y = z) :
  r @ (ap f (p @ q)) = (r @ ap f p) @ (ap f q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 379
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (concat_p_pp r 1 1).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 381
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap_pp_p {A B : Type} (f : A -&gt; B) {x y z : A} {w : B}
  (p : x = y) (q : y = z) (r : f z = w) :
  (ap f (p @ q)) @ r = (ap f p) @ (ap f q @ r).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 385
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 386
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 387
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 387
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (concat_pp_p 1 1 r).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 387
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 388
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Functions commute with path inverses. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 390
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition inverse_ap {A B : Type} (f : A -&gt; B) {x y : A} (p : x = y) :
  (ap f p)^ = ap f (p^)
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 393
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap_V {A B : Type} (f : A -&gt; B) {x y : A} (p : x = y) :
  ap f (p^) = (ap f p)^
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 398
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** [ap] itself is functorial in the first argument. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 401
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition ap_idmap {A : Type} {x y : A} (p : x = y) :
  ap idmap p = p
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 404
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition ap_compose {A B C : Type} (f : A -&gt; B) (g : B -&gt; C) {x y : A} (p : x = y) :
  ap (g o f) p = ap g (ap f p)
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 409
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Sometimes we don't have the actual function [compose]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 411
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition ap_compose' {A B C : Type} (f : A -&gt; B) (g : B -&gt; C) {x y : A} (p : x = y) :
  ap (fun a =&gt; g (f a)) p = ap g (ap f p)
  :=
  match p with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 414
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The action of constant maps. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 416
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition ap_const {A B : Type} {x y : A} (p : x = y) (z : B) :
  ap (fun _ =&gt; z) p = 1
  :=
  match p with idpath =&gt; idpath end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 419
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality of [ap]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 421
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_Ap {A B : Type} {f g : A -&gt; B} (p : forall x, f x = g x) {x y : A} (q : x = y) :
  (ap f q) @ (p y) = (p x) @ (ap g q)
  :=
  match q with
    | idpath =&gt; concat_1p_p1 _
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 426
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A useful variant of [concat_Ap]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 428
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap_homotopic {A B : Type} {f g : A -&gt; B} (p : forall x, f x = g x) {x y : A} (q : x = y)
  : (ap f q) = (p x) @ (ap g q) @ (p y)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 429
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 430
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply moveL_pV.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 431
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply concat_Ap.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 432
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 433
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality of [ap] at identity. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 435
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_A1p {A : Type} {f : A -&gt; A} (p : forall x, f x = x) {x y : A} (q : x = y) :
  (ap f q) @ (p y) = (p x) @ q
  :=
  match q with
    | idpath =&gt; concat_1p_p1 _
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 440
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The corresponding variant of [concat_A1p]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 442
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap_homotopic_id {A : Type} {f : A -&gt; A} (p : forall x, f x = x) {x y : A} (q : x = y)
  : (ap f q) = (p x) @ q @ (p y)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 443
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 444
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply moveL_pV.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 445
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply concat_A1p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 446
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 447
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition concat_pA1 {A : Type} {f : A -&gt; A} (p : forall x, x = f x) {x y : A} (q : x = y) :
  (p x) @ (ap f q) =  q @ (p y)
  :=
  match q as i in (_ = y) return (p x @ ap f i = i @ p y) with
    | idpath =&gt; concat_p1_1p _
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 454
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD_natural {A : Type} {B : A -&gt; Type} {f g : forall x, B x}
  (p : forall x, f x = g x) {x y : A} (q : x = y)
  : apD f q @ p y = ap (transport B q) (p x) @ apD g q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 458
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 459
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 460
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold transport.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 461
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (concat_1p _ @ (ap_idmap _)^ @ (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 462
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 463
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD_homotopic {A : Type} {B : A -&gt; Type} {f g : forall x, B x}
  (p : forall x, f x = g x) {x y : A} (q : x = y)
  : apD f q = ap (transport B q) (p x) @ apD g q @ (p y)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 467
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 468
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply moveL_pV, apD_natural.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 469
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 470
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality with other paths hanging around. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 472
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_pA_pp {A B : Type} {f g : A -&gt; B} (p : forall x, f x = g x)
  {x y : A} (q : x = y)
  {w z : B} (r : w = f x) (s : g y = z)
  :
  (r @ ap f q) @ (p y @ s) = (r @ p x) @ (ap g q @ s).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 476
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 477
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, s; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 478
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction (p x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 479
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 480
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 481
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition concat_pA_p {A B : Type} {f g : A -&gt; B} (p : forall x, f x = g x)
  {x y : A} (q : x = y)
  {w : B} (r : w = f x)
  :
  (r @ ap f q) @ p y = (r @ p x) @ ap g q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 487
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 488
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 489
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction (p x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 490
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 491
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 492
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition concat_A_pp {A B : Type} {f g : A -&gt; B} (p : forall x, f x = g x)
  {x y : A} (q : x = y)
  {z : B} (s : g y = z)
  :
  (ap f q) @ (p y @ s) = (p x) @ (ap g q @ s).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 498
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 499
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, s; cbn.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 500
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply concat_1p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 501
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 502
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition concat_pA1_pp {A : Type} {f : A -&gt; A} (p : forall x, f x = x)
  {x y : A} (q : x = y)
  {w z : A} (r : w = f x) (s : y = z)
  :
  (r @ ap f q) @ (p y @ s) = (r @ p x) @ (q @ s).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 508
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 509
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, s; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 510
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction (p x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 511
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 512
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 513
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition concat_pp_A1p {A : Type} {g : A -&gt; A} (p : forall x, x = g x)
  {x y : A} (q : x = y)
  {w z : A} (r : w = x) (s : g y = z)
  :
  (r @ p x) @ (ap g q @ s) = (r @ q) @ (p y @ s).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 519
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 520
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, s; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 521
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction (p x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 522
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 523
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 524
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition concat_pA1_p {A : Type} {f : A -&gt; A} (p : forall x, f x = x)
  {x y : A} (q : x = y)
  {w : A} (r : w = f x)
  :
  (r @ ap f q) @ p y = (r @ p x) @ q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 530
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 531
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 532
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction (p x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 533
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 534
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 535
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition concat_A1_pp {A : Type} {f : A -&gt; A} (p : forall x, f x = x)
  {x y : A} (q : x = y)
  {z : A} (s : y = z)
  :
  (ap f q) @ (p y @ s) = (p x) @ (q @ s).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 541
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 542
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, s; cbn.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 543
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply concat_1p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 544
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 545
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition concat_pp_A1 {A : Type} {g : A -&gt; A} (p : forall x, x = g x)
  {x y : A} (q : x = y)
  {w : A} (r : w = x)
  :
  (r @ p x) @ ap g q = (r @ q) @ p y.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 551
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 552
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 553
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction (p x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 554
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 555
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 556
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition concat_p_A1p {A : Type} {g : A -&gt; A} (p : forall x, x = g x)
  {x y : A} (q : x = y)
  {z : A} (s : g y = z)
  :
  p x @ (ap g q @ s) = q @ (p y @ s).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 562
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 563
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, s; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 564
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  symmetry; apply concat_1p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 565
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 566
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Some coherence lemmas for functoriality *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 569
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma concat_1p_1 {A} {x : A} (p : x = x) (q : p = 1)
: concat_1p p @ q = ap (fun p' =&gt; 1 @ p') q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 570
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 571
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite &lt;- (inv_V q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 572
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  set (r := q^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 573
Time: 0.015s">
<div class="time" style="width: 45.454545454545%"></div>
<pre> clearbody r; clear q; destruct r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 573
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 574
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 575
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma concat_p1_1 {A} {x : A} (p : x = x) (q : p = 1)
: concat_p1 p @ q = ap (fun p' =&gt; p' @ 1) q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 578
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 579
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite &lt;- (inv_V q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 580
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  set (r := q^).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 581
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clearbody r; clear q; destruct r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 581
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 582
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 583
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Action of [apD10] and [ap10] on paths. *)

(** Application of paths between functions preserves the groupoid structure *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 588
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition apD10_1 {A} {B:A-&gt;Type} (f : forall x, B x) (x:A)
  : apD10 (idpath f) x = 1
:= 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 590
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition apD10_pp {A} {B:A-&gt;Type} {f f' f'' : forall x, B x}
  (h:f=f') (h':f'=f'') (x:A)
: apD10 (h @ h') x = apD10 h x @ apD10 h' x.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 594
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 595
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  case h, h'; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 596
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 597
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD10_V {A} {B:A-&gt;Type} {f g : forall x, B x} (h:f=g) (x:A)
  : apD10 (h^) x = (apD10 h x)^
:= match h with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 601
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap10_1 {A B} {f:A-&gt;B} (x:A) : ap10 (idpath f) x = 1
  := 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 604
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap10_pp {A B} {f f' f'':A-&gt;B} (h:f=f') (h':f'=f'') (x:A)
  : ap10 (h @ h') x = ap10 h x @ ap10 h' x
:= apD10_pp h h' x.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 608
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap10_V {A B} {f g : A-&gt;B} (h : f = g) (x:A)
  : ap10 (h^) x = (ap10 h x)^
:= apD10_V h x.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 612
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** [apD10] and [ap10] also behave nicely on paths produced by [ap] *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 614
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition apD10_ap_precompose {A B C} (f : A -&gt; B) {g g' : forall x:B, C x} (p : g = g') a
: apD10 (ap (fun h : forall x:B, C x =&gt; h oD f) p) a = apD10 p (f a).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 615
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 616
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 617
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 618
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap10_ap_precompose {A B C} (f : A -&gt; B) {g g' : B -&gt; C} (p : g = g') a
: ap10 (ap (fun h : B -&gt; C =&gt; h o f) p) a = ap10 p (f a)
:= apD10_ap_precompose f p a.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 622
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD10_ap_postcompose {A B C} (f : forall x, B x -&gt; C) {g g' : forall x:A, B x} (p : g = g') a
: apD10 (ap (fun h : forall x:A, B x =&gt; fun x =&gt; f x (h x)) p) a = ap (f a) (apD10 p a).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 625
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 626
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 627
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 628
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap10_ap_postcompose {A B C} (f : B -&gt; C) {g g' : A -&gt; B} (p : g = g') a
: ap10 (ap (fun h : A -&gt; B =&gt; f o h) p) a = ap f (ap10 p a)
:= apD10_ap_postcompose (fun a =&gt; f) p a.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 632
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap100 {X Y Z : Type} {f g : X -&gt; Y -&gt; Z} (p : f = g) (x : X) (y : Y)
  : f x y = g x y := (ap10 (ap10 p x) y).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 635
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Transport and the groupoid structure of paths *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 638
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_1 {A : Type} (P : A -&gt; Type) {x : A} (u : P x)
  : 1 # u = u
:= 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 640
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition transport_pp {A : Type} (P : A -&gt; Type) {x y z : A} (p : x = y) (q : y = z) (u : P x) :
  p @ q # u = q # p # u :=
  match q with idpath =&gt;
    match p with idpath =&gt; 1 end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 646
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition transport_pV {A : Type} (P : A -&gt; Type) {x y : A} (p : x = y) (z : P y)
  : p # p^ # z = z
  := (transport_pp P p^ p z)^
  @ ap (fun r =&gt; transport P r z) (concat_Vp p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 651
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition transport_Vp {A : Type} (P : A -&gt; Type) {x y : A} (p : x = y) (z : P x)
  : p^ # p # z = z
  := (transport_pp P p p^ z)^
  @ ap (fun r =&gt; transport P r z) (concat_pV p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 656
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** In the future, we may expect to need some higher coherence for transport:
  for instance, that transport acting on the associator is trivial. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 659
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>Definition transport_p_pp {A : Type} (P : A -&gt; Type)
  {x y z w : A} (p : x = y) (q : y = z) (r : z = w)
  (u : P x)
  : ap (fun e =&gt; e # u) (concat_p_pp p q r)
    @ (transport_pp P (p@q) r u) @ ap (transport P r) (transport_pp P p q u)
  = (transport_pp P p (q@r) u) @ (transport_pp P q r (p#u))
  :&gt; ((p @ (q @ r)) # u = r # q # p # u) .</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 665
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 666
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  destruct p, q, r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 667
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 667
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  exact 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 667
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 668
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Here are other coherence lemmas for transport. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 670
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_pVp {A} (P : A -&gt; Type) {x y:A} (p:x=y) (z:P x)
  : transport_pV P p (transport P p z)
  = ap (transport P p) (transport_Vp P p z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 672
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 673
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 674
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 675
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition transport_VpV {A} (P : A -&gt; Type) {x y : A} (p : x = y) (z : P y)
  : transport_Vp P p (transport P p^ z)
    = ap (transport P p^) (transport_pV P p z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 679
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 680
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 681
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 682
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap_transport_transport_pV {A} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P x) (v : P y) (e : transport P p u = v)
  : ap (transport P p) (moveL_transport_V P p u v e)
       @ transport_pV P p v = e.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 687
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 688
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    by destruct e, p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 689
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 690
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition moveL_transport_V_1 {A} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P x)
  : moveL_transport_V P p u (p # u) 1 = (transport_Vp P p u)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 694
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (* moveL_transport_V P p (transport P p^ v) (transport P p (transport P p^ v)) 1 *)
    (* = ap (transport P p^) (transport_pV P p v)^. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 696
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 696
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* pose (u := p^ # v).  *)
  (* assert (moveL_transport_V P p u (p # u) 1 = (transport_Vp P p u)^). *)
 </pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 699
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 699
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* subst u. rewrite X. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 700
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 700
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Occasionally the induction principles for the identity type show up explicitly; these let us turn them into transport. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 702
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition paths_rect_transport {A : Type} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P x)
  : paths_rect A x (fun a _ =&gt; P a) u y p = transport P p u
  := 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 705
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition paths_ind_transport {A : Type} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P x)
  : paths_ind x (fun a _ =&gt; P a) u y p = transport P p u
  := 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 710
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition paths_ind_r_transport {A : Type} (P : A -&gt; Type) {x y : A}
           (p : x = y) (u : P y)
  : paths_ind_r y (fun b _ =&gt; P b) u x p = transport P p^ u.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 714
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 715
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 716
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 717
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** [ap11] *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 720
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap11_is_ap10_ap01 {A B} {f g:A-&gt;B} (h:f=g) {x y:A} (p:x=y)
: ap11 h p = ap10 h x @ ap g p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 721
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 722
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by path_induction.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 723
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 724
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Dependent transport in doubly dependent types and more. *)

(** Singly dependent transport over doubly dependent types. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 728
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transportD {A : Type} (B : A -&gt; Type) (C : forall a:A, B a -&gt; Type)
  {x1 x2 : A} (p : x1 = x2) (y : B x1) (z : C x1 y)
  : C x2 (p # y)
  :=
  match p with idpath =&gt; z end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 732
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Singly dependent transport over doubly dependent types of 2 variables. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 734
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition transportD2 {A : Type} (B C : A -&gt; Type) (D : forall a:A, B a -&gt; C a -&gt; Type)
  {x1 x2 : A} (p : x1 = x2) (y : B x1) (z : C x1) (w : D x1 y z)
  : D x2 (p # y) (p # z)
  :=
  match p with idpath =&gt; w end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 738
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Doubly dependent transport over doubly dependent types.  *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 740
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transportDD {A : Type} (B : A -&gt; Type) (C : forall a : A, B a -&gt; Type)
  {a1 a2 : A} (pA : a1 = a2)
  {b1 : B a1} {b2 : B a2} (pB : transport B pA b1 = b2)
  (c1 : C a1 b1)
  : C a2 b2
  := transport (C a2) pB (transportD B C pA b1 c1).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 745
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** [ap] for curried two variable functions *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 748
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap011 {A B C} (f : A -&gt; B -&gt; C) {x x' y y'} (p : x = x') (q : y = y')
  : f x y = f x' y'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 749
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 750
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 751
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 752
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 753
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 754
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap011_V {A B C} (f : A -&gt; B -&gt; C) {x x' y y'} (p : x = x') (q : y = y')
  : ap011 f p^ q^ = (ap011 f p q)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 757
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 758
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 759
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap_V.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 760
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 761
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap011_pp {A B C} (f : A -&gt; B -&gt; C) {x x' x'' y y' y''}
  (p : x = x') (p' : x' = x'') (q : y = y') (q' : y' = y'')
  : ap011 f (p @ p') (q @ q') = ap011 f p q @ ap011 f p' q'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 765
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 766
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, p'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 767
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap_pp.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 768
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 769
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap011_compose {A B C D} (f : A -&gt; B -&gt; C) (g : C -&gt; D) {x x' y y'}
  (p : x = x') (q : y = y')
  : ap011 (fun x y =&gt; g (f x y)) p q = ap g (ap011 f p q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 773
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 774
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 775
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap_compose.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 776
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 777
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap011_compose' {A B C D E} (f : A -&gt; B -&gt; C) (g : D -&gt; A) (h : E -&gt; B)
  {x x' y y'}
  (p : x = x') (q : y = y')
  : ap011 (fun x y =&gt; f (g x) (h y)) p q = ap011 f (ap g p) (ap h q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 782
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 783
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 784
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap_compose.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 785
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 786
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap011_is_ap {A B C} (f : A -&gt; B -&gt; C) {x x' : A} {y y' : B} (p : x = x') (q : y = y')
  : ap011 f p q = ap (fun x =&gt; f x y) p @ ap (fun y =&gt; f x' y) q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 789
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 790
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 791
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  symmetry.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 792
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply concat_1p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 793
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 794
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It would be nice to have a consistent way to name the different ways in which this can be dependent.  The following are a sort of half-hearted attempt. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 797
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap011D {A B C} (f : forall (a:A), B a -&gt; C)
           {x x'} (p : x = x') {y y'} (q : p # y = y')
: f x y = f x' y'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 799
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 800
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 801
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 802
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ap01D1 {A B C} (f : forall (a:A), B a -&gt; C a)
           {x x'} (p : x = x') {y y'} (q : p # y = y')
: transport C p (f x y) = f x' y'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 806
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 807
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 808
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 809
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD011 {A B C} (f : forall (a:A) (b:B a), C a b)
           {x x'} (p : x = x') {y y'} (q : p # y = y')
: transport (C x') q (transportD B C p y (f x y)) = f x' y'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 813
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 814
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 815
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 816
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Transporting along two 1-dimensional paths *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 818
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport011 {A B} (P : A -&gt; B -&gt; Type) {x1 x2 : A} {y1 y2 : B}
  (p : x1 = x2) (q : y1 = y2) (z : P x1 y1)
  : P x2 y2
  := transport (fun x =&gt; P x y2) p (transport (fun y =&gt; P x1 y) q z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 821
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition transport011_pp {A B} (P : A -&gt; B -&gt; Type) {x1 x2 x3 : A} {y1 y2 y3 : B}
  (p1 : x1 = x2) (p2 : x2 = x3) (q1 : y1 = y2) (q2 : y2 = y3) (z : P x1 y1)
  : transport011 P (p1 @ p2) (q1 @ q2) z
    = transport011 P p2 q2 (transport011 P p1 q1 z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 826
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 827
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p1, p2, q1, q2; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 828
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 829
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition transport011_compose {A B A' B'} (P : A -&gt; B -&gt; Type) (f : A' -&gt; A) (g : B' -&gt; B)
  {x1 x2 : A'} {y1 y2 : B'} (p : x1 = x2) (q : y1 = y2) (z : P (f x1) (g y1))
  : transport011 (fun x y =&gt; P (f x) (g y)) p q z
   = transport011 P (ap f p) (ap g q) z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 834
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 835
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 836
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 837
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality of [transport011]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 839
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap_transport011{A B} {P Q : A -&gt; B -&gt; Type}
  {a1 a2 : A} {b1 b2 : B} (p : a1 = a2) (q : b1 = b2)
  (f : forall {a b}, P a b -&gt; Q a b) (x : P a1 b1)
  : f (transport011 P p q x) = transport011 Q p q (f x).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 842
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 843
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 844
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 845
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Transporting along higher-dimensional paths *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 848
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition transport2 {A : Type} (P : A -&gt; Type) {x y : A} {p q : x = y}
  (r : p = q) (z : P x)
  : p # z = q # z
  := ap (fun p' =&gt; p' # z) r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 851
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** An alternative definition. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 853
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>Definition transport2_is_ap10 {A : Type} (Q : A -&gt; Type) {x y : A} {p q : x = y}
  (r : p = q) (z : Q x)
  : transport2 Q r z = ap10 (ap (transport Q) r) z
  := match r with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 856
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition transport2_p2p {A : Type} (P : A -&gt; Type) {x y : A} {p1 p2 p3 : x = y}
  (r1 : p1 = p2) (r2 : p2 = p3) (z : P x)
  : transport2 P (r1 @ r2) z = transport2 P r1 z @ transport2 P r2 z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 860
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 861
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r1, r2; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 862
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 863
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition transport2_V {A : Type} (Q : A -&gt; Type) {x y : A} {p q : x = y}
  (r : p = q) (z : Q x)
  : transport2 Q (r^) z = (transport2 Q r z)^
  := match r with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 868
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition concat_AT {A : Type} (P : A -&gt; Type) {x y : A} {p q : x = y}
  {z w : P x} (r : p = q) (s : z = w)
  : ap (transport P p) s  @  transport2 P r w
    = transport2 P r z  @  ap (transport P q) s
  := match r with idpath =&gt; (concat_p1_1p _) end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 874
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition transport_pp_1 {A : Type} (P : A -&gt; Type) {a b : A} (p : a = b) (x : P a)
  : transport_pp P p 1 x = transport2 P (concat_p1 p) x.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 877
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 878
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by induction p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 879
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 880
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* TODO: What should this be called? *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 882
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma ap_transport {A} {P Q : A -&gt; Type} {x y : A} (p : x = y) (f : forall x, P x -&gt; Q x) (z : P x) :
  f y (p # z) = (p # (f x z)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 883
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 884
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by induction p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 885
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 886
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Lemma ap_transportD {A : Type}
      (B : A -&gt; Type) (C1 C2 : forall a : A, B a -&gt; Type)
      (f : forall a b, C1 a b -&gt; C2 a b)
      {x1 x2 : A} (p : x1 = x2) (y : B x1) (z : C1 x1 y)
: f x2 (p # y) (transportD B C1 p y z)
  = transportD B C2 p y (f x1 y z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 893
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 894
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by induction p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 895
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 896
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Lemma ap_transportD2 {A : Type}
      (B C : A -&gt; Type) (D1 D2 : forall a, B a -&gt; C a -&gt; Type)
      (f : forall a b c, D1 a b c -&gt; D2 a b c)
      {x1 x2 : A} (p : x1 = x2) (y : B x1) (z : C x1) (w : D1 x1 y z)
: f x2 (p # y) (p # z) (transportD2 B C D1 p y z w)
  = transportD2 B C D2 p y z (f x1 y z w).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 903
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 904
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by induction p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 905
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 906
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* TODO: What should this be called? *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 908
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Lemma ap_transport_pV {X} (Y : X -&gt; Type) {x1 x2 : X} (p : x1 = x2)
      {y1 y2 : Y x2} (q : y1 = y2)
: ap (transport Y p) (ap (transport Y p^) q) =
  transport_pV Y p y1 @ q @ (transport_pV Y p y2)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 911
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 912
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 913
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 914
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* TODO: And this? *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 916
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_pV_ap {X} (P : X -&gt; Type) (f : forall x, P x)
      {x1 x2 : X} (p : x1 = x2)
: ap (transport P p) (apD f p^) @ apD f p = transport_pV P p (f x2).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 918
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 919
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 920
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 921
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD_pp {A} {P : A -&gt; Type} (f : forall x, P x)
           {x y z : A} (p : x = y) (q : y = z)
  : apD f (p @ q)
    = transport_pp P p q (f x) @ ap (transport P q) (apD f p) @ apD f q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 926
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 927
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 928
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 929
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition apD_V {A} {P : A -&gt; Type} (f : forall x, P x)
           {x y : A} (p : x = y)
  : apD f p^ = moveR_transport_V _ _ _ _ (apD f p)^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 933
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 934
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 935
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 936
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Transporting in particular fibrations. *)

(** One frequently needs lemmas showing that transport in a certain dependent type is equal to some more explicitly defined operation, defined according to the structure of that dependent type.  For most dependent types, we prove these lemmas in the appropriate file in the types/ subdirectory.  Here we consider only the most basic cases. *)

(** Transporting in a constant fibration. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 942
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_const {A B : Type} {x1 x2 : A} (p : x1 = x2) (y : B)
  : transport (fun x =&gt; B) p y = y.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 943
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 944
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 945
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  exact 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 945
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 946
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition transport2_const {A B : Type} {x1 x2 : A} {p q : x1 = x2}
  (r : p = q) (y : B)
  : transport_const p y = transport2 (fun _ =&gt; B) r y @ transport_const q y
  := match r with idpath =&gt; (concat_1p _)^ end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 951
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition transportD_const_fiber {A : Type} (B : A -&gt; Type) (C : Type)
  {x1 x2 : A} (p : x1 = x2) (y : B x1) (z : C)
  : transportD B (fun _ _ =&gt; C) p y z = z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 955
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 956
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 957
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 958
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition transportD_const_base {A B : Type} (C : A -&gt; B -&gt; Type) {x1 x2 : A}
  (p : x1 = x2) {y : B} (z : C x1 y)
  : transportD (fun x =&gt; B) C p y z
    = transport (fun x =&gt; C x (transport (fun _ =&gt; B) p y)) p
      (transport (C x1) (transport_const p y)^ z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 964
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 965
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 966
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 967
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition transportDD_const {A : Type} (B : A -&gt; Type) (C : Type)
  {a1 a2 : A} (pA : a1 = a2)
  {b1 : B a1} {b2 : B a2} (pB : transport B pA b1 = b2)
  (c1 : C)
  : transportDD B (fun _ _ =&gt; C) pA pB c1 = c1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 973
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 974
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by destruct pB, pA.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 975
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 976
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Transporting in a pulled back fibration. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 978
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma transport_compose {A B} {x y : A} (P : B -&gt; Type) (f : A -&gt; B)
  (p : x = y) (z : P (f x))
  : transport (fun x =&gt; P (f x)) p z  =  transport P (ap f p) z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 980
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 981
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 982
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 983
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Lemma transportD_compose {A A'} B {x x' : A} (C : forall x : A', B x -&gt; Type) (f : A -&gt; A')
      (p : x = x') y (z : C (f x) y)
: transportD (B o f) (C oD f) p y z
  = transport (C (f x')) (transport_compose B f p y)^ (transportD B C (ap f p) y z).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 988
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 989
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 990
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 991
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* TODO: Is there a lemma like [transportD_compose], but for [apD], which subsumes this? *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 993
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma transport_apD_transportD {A} B (f : forall x : A, B x) (C : forall x, B x -&gt; Type)
      {x1 x2 : A} (p : x1 = x2) (z : C x1 (f x1))
: apD f p # transportD B C p _ z
  = transport (fun x =&gt; C x (f x)) p z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 996
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 997
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 998
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 999
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Lemma transport_precompose {A B C} (f : A -&gt; B) (g g' : B -&gt; C) (p : g = g')
: transport (fun h : B -&gt; C =&gt; g o f = h o f) p 1 =
  ap (fun h =&gt; h o f) p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1003
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1004
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1005
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1006
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A special case of [transport_compose] which seems to come up a lot. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1008
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition transport_idmap_ap {A} (P : A -&gt; Type) {x y : A} (p : x = y) (u : P x)
: transport P p u = transport idmap (ap P p) u
  := match p with idpath =&gt; idpath end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1010
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A combination of [transport_compose] with [transport2]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1012
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition transport_compose_path_ap {X Y : Type} (P : Y -&gt; Type) (g : X -&gt; Y)
  {x0 x1 : X} {p : x0 = x1} {r : g x0 = g x1} (s : ap g p = r)
  (z : P (g x0))
  : transport (P o g) p z = transport P r z
  := transport_compose P g p z @ transport2 P s z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1016
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Sometimes, it's useful to have the goal be in terms of [ap], so we can use lemmas about [ap].  However, we can't just [rewrite !transport_idmap_ap], as that's likely to loop.  So, instead, we provide a tactic [transport_to_ap], that replaces all [transport P p u] with [transport idmap (ap P p) u] for non-[idmap] [P]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1018
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Ltac transport_to_ap :=
  repeat match goal with
           | [ |- context[transport ?P ?p ?u] ]
             =&gt; match P with
                  | idmap =&gt; fail 1 (* we don't want to turn [transport idmap (ap _ _)] into [transport idmap (ap idmap (ap _ _))] *)
                  | _ =&gt; idtac
                end;
               progress rewrite (transport_idmap_ap P p u)
         end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1026
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Transporting in a fibration dependent on two independent types commutes. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1028
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_transport {A B} (C : A -&gt; B -&gt; Type)
           {x1 x2 : A} (p : x1 = x2) {y1 y2 : B} (q : y1 = y2)
           (c : C x1 y1)
: transport (C x2) q (transport (fun x =&gt; C x y1) p c)
  = transport (fun x =&gt; C x y2) p (transport (C x1) q c).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1032
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1033
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, q; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1034
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1035
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** The behavior of [ap] and [apD]. *)

(** In a constant fibration, [apD] reduces to [ap], modulo [transport_const]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1039
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma apD_const {A B} {x y : A} (f : A -&gt; B) (p: x = y) :
  apD f p = transport_const p (f x) @ ap f p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1040
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1041
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1042
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1043
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD_compose {A A' : Type} {B : A' -&gt; Type} (g : A -&gt; A')
  (f : forall a, B a) {x y : A} (p : x = y)
  : apD (f o g) p  = (transport_compose _ _ _ _) @ apD f (ap g p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1047
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1048
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1049
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1050
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition apD_compose' {A A' : Type} {B : A' -&gt; Type} (g : A -&gt; A')
  (f : forall a, B a) {x y : A} (p : x = y)
  : apD f (ap g p) = (transport_compose B _ _ _)^ @ apD (f o g) p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1054
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1055
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1056
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1057
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The 2-dimensional groupoid structure *)

(** Horizontal composition of 2-dimensional paths. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1061
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat2 {A} {x y z : A} {p p' : x = y} {q q' : y = z} (h : p = p') (h' : q = q')
  : p @ q = p' @ q'
:= match h, h' with idpath, idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1063
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "p @@ q" := (concat2 p q)%path : path_scope.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1065
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments concat2 : simpl nomatch.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1067
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma concat2_ap_ap {A B : Type} {x' y' z' : B}
           (f : A -&gt; (x' = y')) (g : A -&gt; (y' = z'))
           {x y : A} (p : x = y)
: (ap f p) @@ (ap g p) = ap (fun u =&gt; f u @ g u) p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1072
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1073
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    by path_induction.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1074
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1075
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** 2-dimensional path inversion *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1077
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition inverse2 {A : Type} {x y : A} {p q : x = y} (h : p = q)
  : p^ = q^
:= ap inverse h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1079
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Two common combinations of [ap_pp] and [ap_V]. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1082
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition ap_pV {A B : Type} (f : A -&gt; B) {a0 a1 a0' : A} (p : a0 = a1) (q : a0' = a1)
  : ap f (p @ q^) = ap f p @ (ap f q)^
  := ap_pp f p q^ @ (1 @@ ap_V f q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1084
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap_Vp {A B : Type} (f : A -&gt; B) {a0 a1 a1' : A} (p : a0 = a1) (q : a0 = a1')
  : ap f (p^ @ q) = (ap f p)^ @ ap f q
  := ap_pp f p^ q @ (ap_V f p @@ 1).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1088
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Some higher coherences *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1091
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma ap_pp_concat_p1 {A B} (f : A -&gt; B) {a b : A} (p : a = b)
  : ap_pp f p 1 @ concat_p1 (ap f p) = ap (ap f) (concat_p1 p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1092
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1093
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1094
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1095
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Lemma ap_pp_concat_1p {A B} (f : A -&gt; B) {a b : A} (p : a = b)
  : ap_pp f 1 p @ concat_1p (ap f p) = ap (ap f) (concat_1p p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1098
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1099
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma ap_pV_concat_pV {A B} (f : A -&gt; B) {x y : A} (p : x = y)
  : ap_pV f p p @ concat_pV (ap f p) = ap (ap f) (concat_pV p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1107
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Lemma ap_Vp_concat_Vp {A B} (f : A -&gt; B) {x y : A} (p : x = y)
  : ap_Vp f p p @ concat_Vp (ap f p)
  = ap (ap f) (concat_Vp p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma concat_pV_inverse2 {A} {x y : A} (p q : x = y) (r : p = q)
: (r @@ inverse2 r) @ concat_pV q = concat_pV p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r, p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma concat_Vp_inverse2 {A} {x y : A} (p q : x = y) (r : p = q)
: (inverse2 r @@ r) @ concat_Vp q = concat_Vp p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r, p; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1125
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Often [ap_pV_concat_pV] is combined with [concat_pV_inverse2] using a beta rule for [ap f p].  This and several above are best read from right-to-left, and the name here reflects the right-hand-side. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1128
Time: 0.003s">
<div class="time" style="width: 9.0909090909091%"></div>
<pre>Definition ap_ap_concat_pV {A B} (f : A -&gt; B) {x y : A} (p : x = y)
  (q : f x = f y) (r : ap f p = q)
  : ap_pV f p p @ ((r @@ inverse2 r) @ concat_pV q) = ap (ap f) (concat_pV p)
  := (1 @@ concat_pV_inverse2 _ q r) @ ap_pV_concat_pV f p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1131
Time: 0.003s">
<div class="time" style="width: 9.0909090909091%"></div>
<pre>

Definition ap_ap_concat_Vp {A B} (f : A -&gt; B) {x y : A} (p : x = y)
  (q : f x = f y) (r : ap f p = q)
  : ap_Vp f p p @ ((inverse2 r @@ r) @ concat_Vp q) = ap (ap f) (concat_Vp p)
  := (1 @@ concat_Vp_inverse2 _ q r) @ ap_Vp_concat_Vp f p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Whiskering *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition whiskerL {A : Type} {x y z : A} (p : x = y)
  {q r : y = z} (h : q = r) : p @ q = p @ r
:= 1 @@ h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition whiskerR {A : Type} {x y z : A} {p q : x = y}
  (h : p = q) (r : y = z) : p @ r = q @ r
:= h @@ 1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Unwhiskering, a.k.a. cancelling. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1148
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition cancelL {A} {x y z : A} (p : x = y) (q r : y = z)
: (p @ q = p @ r) -&gt; (q = r)
:= fun h =&gt; (concat_V_pp p q)^ @ whiskerL p^ h @ (concat_V_pp p r).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1150
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition cancelR {A} {x y z : A} (p q : x = y) (r : y = z)
: (p @ r = q @ r) -&gt; (p = q)
:= fun h =&gt; (concat_pp_V p r)^ @ whiskerR h r^ @ (concat_pp_V q r).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Whiskering and identity paths. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1157
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>Definition whiskerR_p1 {A : Type} {x y : A} {p q : x = y} (h : p = q) :
  (concat_p1 p)^ @ whiskerR h 1 @ concat_p1 q = h
  :=
  match h with idpath =&gt;
    match p with idpath =&gt;
      1
    end end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1163
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition whiskerR_1p {A : Type} {x y z : A} (p : x = y) (q : y = z) :
  whiskerR 1 q = 1 :&gt; (p @ q = p @ q)
  :=
  match q with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1168
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition whiskerL_p1 {A : Type} {x y z : A} (p : x = y) (q : y = z) :
  whiskerL p 1 = 1 :&gt; (p @ q = p @ q)
  :=
  match q with idpath =&gt; 1 end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1173
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>

Definition whiskerL_1p {A : Type} {x y : A} {p q : x = y} (h : p = q) :
  (concat_1p p) ^ @ whiskerL 1 h @ concat_1p q = h
  :=
  match h with idpath =&gt;
    match p with idpath =&gt;
      1
    end end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition whiskerR_p1_1 {A} {x : A} (h : idpath x = idpath x)
: whiskerR h 1 = h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ @ whiskerR_p1 h); simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  symmetry; exact (concat_p1 _ @ concat_1p _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition whiskerL_1p_1 {A} {x : A} (h : idpath x = idpath x)
: whiskerL 1 h = h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ @ whiskerL_1p h); simpl.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  symmetry; exact (concat_p1 _ @ concat_1p _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition cancel2L {A : Type} {x y z : A} {p p' : x = y} {q q' : y = z}
           (g : p = p') (h k : q = q')
: (g @@ h = g @@ k) -&gt; (h = k).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1201
Time: 0.008s">
<div class="time" style="width: 24.242424242424%"></div>
<pre> induction g, p, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine ((whiskerL_1p h)^ @ _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (_ @ (whiskerL_1p k)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (whiskerR _ _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (whiskerL _ _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1204
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1205
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition cancel2R {A : Type} {x y z : A} {p p' : x = y} {q q' : y = z}
           (g h : p = p') (k : q = q')
: (g @@ k = h @@ k) -&gt; (g = h).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> induction k, p, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine ((whiskerR_p1 g)^ @ _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (_ @ (whiskerR_p1 h)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (whiskerR _ _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (whiskerL _ _).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1214
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** Whiskering and composition *)

(* The naming scheme for these is a little unclear; should [pp] refer to concatenation of the 2-paths being whiskered or of the paths we are whiskering by? *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition whiskerL_pp {A} {x y z : A} (p : x = y) {q q' q'' : y = z}
           (r : q = q') (s : q' = q'')
: whiskerL p (r @ s) = whiskerL p r @ whiskerL p s.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, r, s; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition whiskerR_pp {A} {x y z : A} {p p' p'' : x = y} (q : y = z)
           (r : p = p') (s : p' = p'')
: whiskerR (r @ s) q = whiskerR r q @ whiskerR s q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct q, r, s; reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* For now, I've put an [L] or [R] to mark when we're referring to the whiskering paths. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1234
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition whiskerL_VpL {A} {x y z : A} (p : x = y)
           {q q' : y = z} (r : q = q')
: (concat_V_pp p q)^ @ whiskerL p^ (whiskerL p r) @ concat_V_pp p q'
  = r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, r, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1240
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition whiskerL_pVL {A} {x y z : A} (p : y = x)
           {q q' : y = z} (r : q = q')
: (concat_p_Vp p q)^ @ whiskerL p (whiskerL p^ r) @ concat_p_Vp p q'
  = r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p, r, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1248
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition whiskerR_pVR {A} {x y z : A} {p p' : x = y}
           (r : p = p') (q : y = z)
: (concat_pp_V p q)^ @ whiskerR (whiskerR r q) q^ @ concat_pp_V p' q
  = r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1254
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  destruct p, r, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1255
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1256
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition whiskerR_VpR {A} {x y z : A} {p p' : x = y}
           (r : p = p') (q : z = y)
: (concat_pV_p p q)^ @ whiskerR (whiskerR r q^) q @ concat_pV_p p' q
  = r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1262
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  destruct p, r, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1263
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality of [concat_p_pp] in left-most argument. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1266
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_p_pp_nat_l {A} {w x y z : A}
  {p p' : w = x} (h : p = p') (q : x = y) (r : y = z)
  : whiskerR h (q @ r) @ concat_p_pp p' q r
    = concat_p_pp p q r @ whiskerR (whiskerR h q) r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1270
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  by destruct h, p, q, r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1271
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality of [concat_p_pp] in middle argument. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1274
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_p_pp_nat_m {A} {w x y z : A}
  (p : w = x) {q q' : x = y} (h : q = q') (r : y = z)
  : whiskerL p (whiskerR h r) @ concat_p_pp p q' r
    = concat_p_pp p q r @ whiskerR (whiskerL p h) r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1278
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  by destruct h, p, q, r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1279
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Naturality of [concat_p_pp] in right-most argument. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1282
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_p_pp_nat_r {A} {w x y z : A}
  (p : w = x) (q : x = y) {r r' : y = z} (h : r = r')
  : whiskerL p (whiskerL q h) @ concat_p_pp p q r'
    = concat_p_pp p q r @ whiskerL (p @ q) h.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1285
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1286
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  by destruct h, p, q, r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1287
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1288
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The interchange law for concatenation. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1290
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>Definition concat_concat2 {A : Type} {x y z : A} {p p' p'' : x = y} {q q' q'' : y = z}
  (a : p = p') (b : p' = p'') (c : q = q') (d : q' = q'') :
  (a @@ c) @ (b @@ d) = (a @ b) @@ (c @ d).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  case d.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  case c.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1295
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  case b.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  case a.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1298
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The interchange law for whiskering.  Special case of [concat_concat2]. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1301
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>Definition concat_whisker {A} {x y z : A} (p p' : x = y) (q q' : y = z) (a : p = p') (b : q = q') :
  (whiskerR a q) @ (whiskerL p' b) = (whiskerL p b) @ (whiskerR a q')
  :=
  match b with
    idpath =&gt;
    match a with idpath =&gt;
      (concat_1p _)^
    end
  end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Structure corresponding to the coherence equations of a bicategory. *)

(** The "pentagonator": the 3-cell witnessing the associativity pentagon. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1313
Time: 0.01s">
<div class="time" style="width: 30.30303030303%"></div>
<pre>Definition pentagon {A : Type} {v w x y z : A} (p : v = w) (q : w = x) (r : x = y) (s : y = z)
  : whiskerL p (concat_p_pp q r s)
      @ concat_p_pp p (q@r) s
      @ whiskerR (concat_p_pp p q r) s
  = concat_p_pp p q (r@s) @ concat_p_pp (p@q) r s.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1317
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1318
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
  case p, q, r, s.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1319
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1320
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The 3-cell witnessing the left unit triangle. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition triangulator {A : Type} {x y z : A} (p : x = y) (q : y = z)
  : concat_p_pp p 1 q @ whiskerR (concat_p1 p) q
  = whiskerL p (concat_1p q).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1325
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  case p, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The Eckmann-Hilton argument *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1329
Time: 0.013s">
<div class="time" style="width: 39.393939393939%"></div>
<pre>Definition eckmann_hilton {A : Type} {x:A} (p q : 1 = 1 :&gt; (x = x)) : p @ q = q @ p :=
  (whiskerR_p1 p @@ whiskerL_1p q)^
  @ (concat_p1 _ @@ concat_p1 _)
  @ (concat_1p _ @@ concat_1p _)
  @ (concat_whisker _ _ _ _ p q)
  @ (concat_1p _ @@ concat_1p _)^
  @ (concat_p1 _ @@ concat_p1 _)^
  @ (whiskerL_1p q @@ whiskerR_p1 p).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The action of functions on 2-dimensional paths *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1339
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap02 {A B : Type} (f:A-&gt;B) {x y:A} {p q:x=y} (r:p=q) : ap f p = ap f q
  := ap (ap f) r.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1340
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap02_pp {A B} (f:A-&gt;B) {x y:A} {p p' p'':x=y} (r:p=p') (r':p'=p'')
  : ap02 f (r @ r') = ap02 f r @ ap02 f r'
  := ap_pp (ap f) r r'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1344
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition ap02_p2p {A B} (f:A-&gt;B) {x y z:A} {p p':x=y} {q q':y=z} (r:p=p') (s:q=q')
  : ap02 f (r @@ s) = ap_pp f p q
                      @ (ap02 f r @@ ap02 f s)
                      @ (ap_pp f p' q')^.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1349
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1350
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
  case r, s, p, q.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1351
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1351
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1352
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition apD02 {A : Type} {B : A -&gt; Type} {x y : A} {p q : x = y}
  (f : forall x, B x) (r : p = q)
  : apD f p = transport2 B r (f x) @ apD f q
  := match r with idpath =&gt; (concat_1p _)^ end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1357
Time: 0.033s">
<div class="time" style="width: 100%"></div>
<pre>

Definition apD02_const {A B : Type} (f : A -&gt; B) {x y : A} {p q : x = y} (r : p = q)
  : apD02 f r = (apD_const f p)
                  @ (transport2_const r (f x) @@ ap02 f r)
                  @ (concat_p_pp _ _ _)^
                  @ (whiskerL (transport2 _ r (f x)) (apD_const f q)^)
  := match r with idpath =&gt;
    match p with idpath =&gt; 1
    end end.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1366
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* And now for a lemma whose statement is much longer than its proof. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1368
Time: 0.003s">
<div class="time" style="width: 9.0909090909091%"></div>
<pre>Definition apD02_pp {A} (B : A -&gt; Type) (f : forall x:A, B x) {x y : A}
  {p1 p2 p3 : x = y} (r1 : p1 = p2) (r2 : p2 = p3)
  : apD02 f (r1 @ r2)
  = apD02 f r1
  @ whiskerL (transport2 B r1 (f x)) (apD02 f r2)
  @ concat_p_pp _ _ _
  @ (whiskerR (transport2_p2p B r1 r2 (f x))^ (apD f p3)).</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1374
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1375
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
  destruct r1, r2.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1376
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre> destruct p1.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1376
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1376
Time: 0.005s">
<div class="time" style="width: 15.151515151515%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1377
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>

Definition ap022 {A B C} (f : A -&gt; B -&gt; C) {x x' y y'}
  {p p' : x = x'} (r : p = p') {q q' : y = y'} (s : q = q')
  : ap011 f p q = ap011 f p' q'.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1381
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1382
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct r, p.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1383
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap02.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1384
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact s.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1385
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1386
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** These lemmas need better names. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1388
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>Definition ap_transport_Vp_idmap {A B} (p q : A = B) (r : q = p) (z : A)
: ap (transport idmap q^) (ap (fun s =&gt; transport idmap s z) r)
  @ ap (fun s =&gt; transport idmap s (p # z)) (inverse2 r)
  @ transport_Vp idmap p z
  = transport_Vp idmap q z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1392
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1393
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
  by path_induction.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1394
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1395
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>

Definition ap_transport_pV_idmap {A B} (p q : A = B) (r : q = p) (z : B)
: ap (transport idmap q) (ap (fun s =&gt; transport idmap s^ z) r)
  @ ap (fun s =&gt; transport idmap s (p^ # z)) r
  @ transport_pV idmap p z
  = transport_pV idmap q z.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1401
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1402
Time: 0.002s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
  by path_induction.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1403
Time: 0.001s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1404
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Hints *)

(** We declare some more [Hint Resolve] hints, now in the "hint database" [path_hints].  In general various hints (resolve, rewrite, unfold hints) can be grouped into "databases". This is necessary as sometimes different kinds of hints cannot be mixed, for example because they would cause a combinatorial explosion or rewriting cycles.  A specific [Hint Resolve] database [db] can be used with [auto with db].

    The hints in [path_hints] are designed to push concatenation *outwards*, eliminate identities and inverses, and associate to the left as far as possible. *)

</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1411
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>#[export]
Hint Resolve
  inverse
  concat_1p concat_p1 concat_p_pp
  inv_pp inv_V
  : path_hints.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1416
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* First try at a paths db.  We want the RHS of the equation to become strictly simpler. *)</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1418
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>#[export]
Hint Rewrite
  @concat_p1
  @concat_1p
  @concat_p_pp (* there is a choice here !*)
  @concat_pV
  @concat_Vp
  @concat_V_pp
  @concat_p_Vp
  @concat_pp_V
  @concat_pV_p
  (*@inv_pp*) (* I am not sure about this one *)
  @inv_V
  @moveR_Mp
  @moveR_pM
  @moveL_Mp
  @moveL_pM
  @moveL_1M
  @moveL_M1
  @moveR_M1
  @moveR_1M
  @ap_1
  (* @ap_pp
  @ap_p_pp ?*)
  @inverse_ap
  @ap_idmap
  (* @ap_compose
  @ap_compose'*)
  @ap_const
  (* Unsure about naturality of [ap], was absent in the old implementation. *)
  @apD10_1
  : paths.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1449
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Ltac hott_simpl :=
  autorewrite with paths in * |- * ; auto with path_hints.</pre>
</div>
<div class="code" title="File: PathGroupoids.v
Line: 1453
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

