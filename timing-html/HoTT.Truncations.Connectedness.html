<html>
<head>
<title>Connectedness.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Connectedness.v</h1>

<div class="code" title="File: Connectedness.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * Connectedness *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 1
Time: 0.031s">
<div class="time" style="width: 59.615384615385%"></div>
<pre>Require Import Basics.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 1
Time: 0.009s">
<div class="time" style="width: 17.307692307692%"></div>
<pre>
Require Import Types.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 2
Time: 0.019s">
<div class="time" style="width: 36.538461538462%"></div>
<pre>

Require Import Extensions.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Factorization.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 5
Time: 0.005s">
<div class="time" style="width: 9.6153846153846%"></div>
<pre>
Require Export Modalities.Modality.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>        (* [Export] since the actual definitions of connectedness appear there, in the generality of a modality. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 6
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>Require Import Modalities.Descent.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 6
Time: 0.004s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>
Require Import Truncations.Core Truncations.SeparatedTrunc.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** This reduces universe variables in [conn_pointed_type] and [conn_point_elim], which refer to [Unit]. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Set Universe Minimization ToSet.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope trunc_scope.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** There is a slight controversy of indexing for connectedness — in particular, how the indexing for maps should relate to the indexing for types.  One may reasonably take the connectedness of a map to correspond either to that of its *fibers*, or of its *cofiber*; these differ by 1.  The traditional topological indexing uses the cofiber.  We use the fiber, as does Lurie in [HTT]; but we choose to agree with the traditional indexing on types, while Lurie agrees with it on maps.

Currently, the translation is therefore as follows:

       HoTT              Traditional       Lurie

Map    (n-1)-connected   n-connected       n-connective
Type   n-connected       n-connected       (n+1)-connective

A handy benchmark: under our indexing, the map [S1 -&gt; 1] is 0-connected but not 1-connected, while the map [1 -&gt; S1] is (–1)–connected but not 0-connected.


One reason for our choice is that this way, the n-truncated and n-connected maps are the modal and modally-connected maps for the n-truncation modality.  Many of the basic lemmas about connected maps are in fact true for any modality, and can be found in [Modality.v].  Thus, here we consider mainly properties that involve the interaction of connectedness at different truncation levels. *)

(** ** Truncatedness of the type of extensions *)

(** A key lemma on the interaction between connectedness and truncatedness: suppose one is trying to extend along an n-connected map, into a k-truncated family of types (k ≥ n).  Then the space of possible extensions is (k–n–2)-truncated.

(Mnemonic for the indexing: think of the base case, where k=n; then we know we can eliminate, so the space of extensions is contractible.)

This lemma is most useful via corollaries like the wedge-inclusion, the wiggly wedge, and their n-ary generalizations. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 34
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>Lemma istrunc_extension_along_conn `{Funext} {m n : trunc_index}
  {A B : Type} (f : A -&gt; B) `{IsConnMap n _ _ f}
  (P : B -&gt; Type) {HP : forall b:B, IsTrunc (m +2+ n) (P b)}
  (d : forall a:A, P (f a))
  : IsTrunc m (ExtensionAlong f P d).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert P HP d.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple_induction m m' IH; intros P HP d; simpl in *.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* m = –2 *)
 </pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 42
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre> apply (Build_Contr _ (extension_conn_map_elim n f P d)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros y.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (allpath_extension_conn_map n); assumption.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (* m = S m' *)
 </pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply istrunc_S.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros e e'.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 46
Time: 0.002s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre> exact (istrunc_isequiv_istrunc _ (path_extension e e')).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (* Magically infers: paths in extensions = extensions into paths, which by induction is [m']-truncated. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 47
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Connectedness of path spaces *)

</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance isconnected_paths `{Univalence} {n A}
       `{IsConnected n.+1 A} (x y : A)
  : IsConnected n (x = y).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 53
Time: 0.003s">
<div class="time" style="width: 5.7692307692308%"></div>
<pre>
  exact (contr_equiv' _ (equiv_path_Tr x y)^-1).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Connectivity of pointed types *)

(** The connectivity of a pointed type and (the inclusion of) its point are intimately connected. *)

(** We can't make both of these [Instance]s, as that would result in infinite loops. *)

</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance conn_pointed_type@{u} {n : trunc_index} {A : Type@{u}} (a0:A)
  `{IsConnMap n _ _ (unit_name a0)}
  : IsConnected n.+1 A | 1000.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isconnected_conn_map_to_unit.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 66
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
  exact (OO_cancelR_conn_map (Tr n.+1) (Tr n) (unit_name a0) (const_tt A)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition conn_point_incl `{Univalence} {n : trunc_index} {A : Type} (a0:A)
  `{IsConnected n.+1 A}
  : IsConnMap n (unit_name a0).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 73
Time: 0.002s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre>
  rapply (OO_cancelL_conn_map (Tr n.+1) (Tr n) (unit_name a0) (const_tt A)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply O_lex_leq_Tr.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 76
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Hint Immediate conn_point_incl : typeclass_instances.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Note that [OO_cancelR_conn_map] and [OO_cancelL_conn_map] (Proposition 2.31 of CORS) generalize the above statements to 2/3 of a 2-out-of-3 property for connected maps, for any reflective subuniverse and its subuniverse of separated types.  If useful, we could specialize that more general form explicitly to truncations. *)

(** To prove an [n]-truncated predicate on an (n+1)-connected, pointed type, it's enough to prove it for the basepoint. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition conn_point_elim `{Univalence} (n : trunc_index) {A : pType@{u}} `{IsConnected n.+1 A}
           (P : A -&gt; Type@{u}) `{forall a, IsTrunc n (P a)} (p0 : P (point A))
  : forall a, P a.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 84
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 85
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* This follows from [conn_point_incl] and [conn_map_elim], but we give a direct proof. *)
 </pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>intro a.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* Since [A] is [n+1]-connected, [a0 = a] is [n]-connected, which means that [Tr n (a0 = a)] has an element. *)
 </pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 89
Time: 0.008s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>pose proof (p := center (Tr n ((point A) = a))).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 89
Time: 0.018s">
<div class="time" style="width: 34.615384615385%"></div>
<pre>
  strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (p # p0).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Decreasing connectedness *)

(** An [n.+1]-connected type is also [n]-connected.  This obviously can't be an [Instance]! *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition isconnected_pred n A `{IsConnected n.+1 A}
  : IsConnected n A.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isconnected_from_elim; intros C ? f.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 99
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
  exact (isconnected_elim n.+1 C f).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A [k]-connected type is [n]-connected, when [k &gt;= n].  We constrain [k] by making it of the form [n +2+ m], which makes the induction go through smoothly. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition isconnected_pred_add n m A `{H : IsConnected (n +2+ m) A}
  : IsConnected m A.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: assumption.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply IHn.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isconnected_pred.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  assumption.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A version with the order of summands swapped, which is sometimes handy, e.g. in the next two results. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition isconnected_pred_add' n m A `{H : IsConnected (m +2+ n) A}
  : IsConnected m A.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply (isconnected_pred_add n m).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct (trunc_index_add_comm m n); assumption.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It follows that an [n.+1]-connected type is also [-1]-connected. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition merely_isconnected n A `{IsConnected n.+1 A}
  : merely A
  := @center _ (isconnected_pred_add' n (-1) A).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** And that an [n.+2]-connected type is [0]-connected. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition is0connected_isconnected (n : trunc_index) A `{IsConnected n.+2 A}
  : IsConnected 0 A
  := isconnected_pred_add' n 0 A.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition isconnmap_pred_add n m A B (f : A -&gt; B) `{IsConnMap (n +2+ m) _ _ f}
  : IsConnMap m f.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro b.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 131
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
  exact (isconnected_pred_add n m _).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** 0-connectedness *)

(** To be 0-connected is the same as to be (-1)-connected and that any two points are merely equal.  TODO: This should also be generalized to separated subuniverses (CORS Remark 2.35).  *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition merely_path_is0connected `{Univalence}
           (A : Type) `{IsConnected 0 A} (x y : A)
  : merely (x = y).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** This follows immediately from [isconnected_paths] above. *)
 </pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 142
Time: 0.005s">
<div class="time" style="width: 9.6153846153846%"></div>
<pre>rapply center.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition is0connected_merely_allpath `{Univalence}
           (A : Type) `{merely A}
           (p : forall (x y:A), merely (x = y))
  : IsConnected 0 A.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 149
Time: 0.015s">
<div class="time" style="width: 28.846153846154%"></div>
<pre>
  strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply contr_inhabited_hprop.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply hprop_allpath; intros z w.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 152
Time: 0.027s">
<div class="time" style="width: 51.923076923077%"></div>
<pre>
    strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (equiv_path_Tr z w (p z w)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply tr; assumption.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 155
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The path component of a point [x : X] is connected. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance is0connected_component {X : Type} (x : X)
  : IsConnected 0 { z : X &amp; merely (z = x) }.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply (Build_Contr _ (tr (x; tr idpath))).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 161
Time: 0.003s">
<div class="time" style="width: 5.7692307692308%"></div>
<pre>
  rapply Trunc_ind; intros [Z p].</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 162
Time: 0.006s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>
  strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply (ap tr).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 164
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
  rapply path_sigma_hprop.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact p^.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 166
Time: 0.01s">
<div class="time" style="width: 19.230769230769%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Any two points in a path component are merely equal.  This follows from [merely_path_is0connected], but this proof doesn't need univalence. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition merely_path_component {X : Type} {x : X}
  (z1 z2 : { z : X &amp; merely (z = x) })
  : merely (z1 = z2).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 171
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct z1 as [z1 p1], z2 as [z2 p2].</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 173
Time: 0.01s">
<div class="time" style="width: 19.230769230769%"></div>
<pre>
  strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply tr.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 175
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
  apply path_sigma_hprop; cbn.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (p1 @ p2^).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 177
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The path component of a point [x : X] is equivalent to the image of the constant map [Unit -&gt; X] at [x]. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_component_image_unit {X : Type} (x : X)
  : { z : X &amp; merely (z = x) } &lt;~&gt; image (Tr (-1)) (unit_name x).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold image; simpl.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros z; simpl.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Trunc_functor_equiv; unfold hfiber.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine ((equiv_contr_sigma _)^-1 oE _).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_path_inverse.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 187
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** 0-connected types are indecomposable *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance indecomposable_0connected `{Univalence}
       (X : Type) `{IsConnected 0 X}
  : Indecomposable X.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  assert (IsConnected (-1) X) by exact (isconnected_pred (-1) X).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  constructor.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B f.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    assert (z := center (merely X) : merely X); generalize z.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 197
Time: 0.006s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>
    refine (Trunc_rec _).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 199
Time: 0.004s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre> apply ishprop_sum; try exact _.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      intros l r.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 200
Time: 0.034s">
<div class="time" style="width: 65.384615384615%"></div>
<pre> strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (not_is_inl_and_inr' (f z) (l z) (r z)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      remember (f x) as y eqn:p.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      destruct y as [a|b]; [ left | right ]; intros x'.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 204
Time: 0.052s">
<div class="time" style="width: 100%"></div>
<pre>
      all:assert (q := merely_path_is0connected X x x');
        strip_truncations.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      all:refine (transport _ (ap f q) _).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      all:exact (transport _ p^ tt).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros nx.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (Trunc_rec (n := -1) nx).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (center (merely X)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 211
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Truncation preserves connectedness. Note that this is for different levels. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance isconnected_trunc {X : Type} (n m : trunc_index) `{IsConnected n X}
  : IsConnected n (Tr m X).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold IsConnected.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 217
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
  exact (contr_equiv' _ (Trunc_swap n m X)^-1).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Wedge_Incl_Conn.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Connectivity of the wedge into the product *)

(** A very useful form of the key lemma [istrunc_extension_along_conn] is the connectivity of the wedge into the product, for a pair of pointed spaces.  In fact this can be formulated without mentioning the wedge per se (so, without requiring HIT’s), since the statement only needs to talk about maps out of the wedge.

Once again, we believe that the type of the conclusion is an hprop (though we do not prove it) — essentially because it is wrapping up an elimination principle and its corresponding computation rule — and so we make the proof of this result opaque. *)

</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 228
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>Context `{Univalence}
  {m n : trunc_index}
  {A : Type} (a0 : A) `{IsConnected m.+1 A}
  {B : Type} (b0 : B) `{IsConnected n.+1 B}
  (P : A -&gt; B -&gt; Type) {HP : forall a b, IsTrunc (m +2+ n) (P a b)}
  (f_a0 : forall b:B, P a0 b)
  (f_b0 : forall a:A, P a b0)
  (f_a0b0 : f_a0 b0 = f_b0 a0).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Corollary isconn_wedge_incl
  : { f : forall a b, P a b
  &amp; { e_a0 : forall b, f a0 b = f_a0 b
  &amp; { e_b0 : forall a, f a b0 = f_b0 a
  &amp; e_b0 a0 = (e_a0 b0) @ f_a0b0 }}}.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  assert (goal_as_extension :
    ExtensionAlong (unit_name a0)
      (fun a =&gt; ExtensionAlong (unit_name b0) (P a) (unit_name (f_b0 a)))
      (unit_name (f_a0 ; (unit_name f_a0b0)))).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (extension_conn_map_elim m).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (conn_point_incl a0).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply (istrunc_extension_along_conn (n := n)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      *</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (conn_point_incl b0).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      *</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply HP.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct goal_as_extension as [f_eb name_ea_eab].</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    assert (ea_eab := name_ea_eab tt); clear name_ea_eab.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 254
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (fun a =&gt; pr1 (f_eb a)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (fun b =&gt; apD10 (ea_eab ..1) b).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (fun a =&gt; pr2 (f_eb a) tt).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (* The last component is essentially (g' ..2), wrapped in a bit of path-algebra. *)
   </pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>apply moveL_Mp.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 259
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>
    apply (concatR (apD10 (ea_eab ..2) tt)).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    set (ea := ea_eab ..1).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> generalize ea; simpl.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear ea_eab ea.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite transport_arrow.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite transport_const.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite transport_paths_Fl.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact 1%path.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 263
Time: 0.003s">
<div class="time" style="width: 5.7692307692308%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It is easier to apply the above result with its components separated. *)</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition wedge_incl_elim : forall a b, P a b
  := isconn_wedge_incl.1.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition wedge_incl_comp1 : forall b, wedge_incl_elim a0 b = f_a0 b
  := isconn_wedge_incl.2.1.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition wedge_incl_comp2 : forall a, wedge_incl_elim a b0 = f_b0 a
  := isconn_wedge_incl.2.2.1.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition wedge_incl_comp3
  : wedge_incl_comp2 a0 = (wedge_incl_comp1 b0) @ f_a0b0
  := isconn_wedge_incl.2.2.2.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End Wedge_Incl_Conn.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 279
Time: 0.001s">
<div class="time" style="width: 1.9230769230769%"></div>
<pre>

Definition wedge_incl_elim_uncurried `{Univalence}
  {m n : trunc_index}
  {A : Type} (a0 : A) `{IsConnected m.+1 A}
  {B : Type} (b0 : B) `{IsConnected n.+1 B}
  (P : A -&gt; B -&gt; Type) {HP : forall a b, IsTrunc (m +2+ n) (P a b)}
  (fs : {f_a0 : forall b:B, P a0 b
        &amp; { f_b0 : forall a:A, P a b0
        &amp; f_a0 b0 = f_b0 a0 }})
  : forall (a : A) (b : B), P a b.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct fs as [f_a0 [f_b0 f_a0b0]].</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 291
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (wedge_incl_elim _ _ _ _ _ f_a0b0).</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Connectedness.v
Line: 294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

